<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine Debug Mode</title>
    <script src="https://webgazer.cs.brown.edu/webgazer.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            --primary: #d32f2f;
            --bg-pink: #fff0f3;
            --kindle-bezel: #333333;
            --kindle-screen-bg: #f4f1ea; 
            --kindle-text: #1a1a1a;
            --kindle-font: 'Merriweather', serif;
        }

        body {
            margin: 0; padding: 0;
            font-family: var(--kindle-font);
            background-color: var(--bg-pink);
            color: var(--kindle-text);
            overflow-x: hidden; text-align: center;
            overscroll-behavior-y: none;
        }

        /* --- DEBUG CONSOLE (NEW) --- */
        #debugConsole {
            position: fixed; top: 0; left: 0;
            background: rgba(0,0,0,0.8); color: lime;
            padding: 10px; font-family: monospace; font-size: 12px;
            text-align: left; z-index: 9999;
            max-width: 300px; pointer-events: none;
        }
        
        /* --- BLUE TRACKING DOT (NEW) --- */
        #gazeDot {
            position: fixed; width: 20px; height: 20px;
            background: blue; border-radius: 50%;
            pointer-events: none; z-index: 9998;
            transform: translate(-50%, -50%);
            display: none; border: 2px solid white;
        }

        /* --- CALIBRATION OVERLAY --- */
        .calibration-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.98); z-index: 5000;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
        }
        .calib-instruction { font-size: 1.5rem; margin-bottom: 20px; max-width: 80%; font-family: 'Playfair Display', serif; }
        .calib-btn {
            width: 60px; height: 60px; background-color: var(--primary);
            border-radius: 50%; border: none; cursor: pointer;
            position: absolute; font-size: 1.8rem; color: white;
            display: flex; justify-content: center; align-items: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: all 0.3s ease;
        }
        .skip-btn {
            margin-top: 50px; padding: 10px 20px; background: #ccc; border: none; cursor: pointer; display: none;
        }

        /* --- HERO SECTION --- */
        .hero {
            min-height: 90vh; padding: 50px 20px;
            display: none; /* Hidden until calibration done */
            flex-direction: column; justify-content: center; align-items: center;
            position: relative;
        }
        .status-text {
            font-size: 1.5rem; height: 30px; color: var(--primary);
            font-style: italic; margin-bottom: 20px; font-weight: bold; transition: opacity 0.3s;
        }
        .btn-container {
            display: flex; gap: 50px; margin-top: 20px;
            position: relative; height: 100px; width: 100%;
            justify-content: center;
        }
        button {
            padding: 15px 40px; font-size: 1.3rem; border: none; cursor: pointer;
            border-radius: 50px; font-family: 'Playfair Display', serif;
            transition: transform 0.2s; position: relative; z-index: 10;
        }
        .yes-btn { background-color: var(--primary); color: white; box-shadow: 0 4px 15px rgba(211, 47, 47, 0.4); }
        .no-btn { background-color: transparent; color: var(--primary); border: 2px solid var(--primary); }

        /* --- KINDLE STYLES --- */
        .kindle-section { padding: 60px 20px; background: #e8e0e3; user-select: none; display: none; }
        .kindle-device {
            background-color: var(--kindle-bezel); border-radius: 20px; padding: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3); max-width: 900px; margin: 0 auto; position: relative;
        }
        .kindle-device::after {
            content: 'kindle'; position: absolute; bottom: 12px; left: 50%; transform: translateX(-50%);
            color: #666; font-family: sans-serif; font-size: 0.9rem; letter-spacing: 1px;
        }
        .kindle-screen {
            background-color: var(--kindle-screen-bg); padding: 30px; position: relative;
            overflow: hidden; cursor: pointer; min-height: 500px; display: flex; align-items: stretch;
            transition: opacity 0.2s ease;
        }
        .page-refreshing { opacity: 0.4; filter: blur(1px); }
        .book-layout { display: flex; flex: 1; width: 100%; position: relative; }
        .book-spine-shadow {
            position: absolute; top: -30px; bottom: -30px; left: 50%; width: 60px;
            transform: translateX(-50%); background: linear-gradient(to right, transparent, rgba(0,0,0,0.1), transparent);
            pointer-events: none; z-index: 5;
        }
        .book-page { flex: 1; padding: 20px; text-align: left; overflow-y: auto; }

        @media (max-width: 768px) {
            .kindle-section { padding: 20px 10px; }
            .kindle-device { padding: 15px 15px 35px 15px; }
            .kindle-screen { padding: 15px; min-height: 400px; }
            .book-spine-shadow { display: none; }
            .book-page { display: block; width: 100%; font-size: 1.1rem; }
            h1 { font-size: 2.5rem !important; }
            h2 { font-size: 1.5rem !important; }
            .btn-container { flex-direction: column; height: auto; align-items: center; gap: 20px; }
        }

        .book-page h2 { color: var(--kindle-text); font-size: 1.8rem; margin-top: 0; border-bottom: 1px solid #ccc; padding-bottom: 15px; }
        .letter-text { font-size: 1.1rem; line-height: 1.8; color: var(--kindle-text); }
        .photo-stack { display: flex; flex-direction: column; gap: 25px; margin-top: 30px; }
        .kindle-photo { background: white; padding: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transform: rotate(-2deg); transition: transform 0.3s; }
        .kindle-photo:nth-child(even) { transform: rotate(2deg); }
        .kindle-photo img { width: 100%; height: auto; display: block; }
        .page-number { text-align: center; font-size: 0.9rem; color: #888; margin-top: 30px; }
        .click-hint { position: absolute; bottom: 5px; right: 15px; font-size: 0.7rem; color: #aaa; font-style: italic; }

        /* --- DENTAL GAME --- */
        .game-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 240, 243, 0.98); z-index: 2000; flex-direction: column;
            justify-content: center; align-items: center;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><text y="20" font-size="20">ü™•</text></svg>'), auto; 
        }
        .tooth-container { position: relative; width: 300px; height: 350px; margin-bottom: 20px; }
        .clean-tooth {
            width: 100%; height: 100%; background-color: white;
            mask-image: url('data:image/svg+xml;utf8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="m471,71.7c-20.2-32.6-49.1-53-83.6-58.9-27.9-4.8-57.2,0.1-87,14.6-27.8,13.5-61,13.5-88.9,0-29.8-14.4-59.1-19.3-87-14.6-34.4,5.9-63.3,26.2-83.5,58.9-34.7,56-39.6,141.7-13.2,229.1 24.8,82.1 74.5,154.8 133,194.3 10.5,7.1 23.9,7.8 35.1,1.9 10.8-5.7 17.5-16.8 17.5-29.1 0-107.9 30.2-166.2 42.6-166.2 12.4,0 42.6,58.2 42.6,166.4 0,12.1 6.6,23.2 17.5,28.9 15,7.7 28.3,2.7 35.1-1.9 58.6-39.4 108.2-112.2 133-194.3 26.4-87.4 21.5-173.1-13.2-229.1v1.42109e-14z"/></svg>');
            -webkit-mask-image: url('data:image/svg+xml;utf8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="m471,71.7c-20.2-32.6-49.1-53-83.6-58.9-27.9-4.8-57.2,0.1-87,14.6-27.8,13.5-61,13.5-88.9,0-29.8-14.4-59.1-19.3-87-14.6-34.4,5.9-63.3,26.2-83.5,58.9-34.7,56-39.6,141.7-13.2,229.1 24.8,82.1 74.5,154.8 133,194.3 10.5,7.1 23.9,7.8 35.1,1.9 10.8-5.7 17.5-16.8 17.5-29.1 0-107.9 30.2-166.2 42.6-166.2 12.4,0 42.6,58.2 42.6,166.4 0,12.1 6.6,23.2 17.5,28.9 15,7.7 28.3,2.7 35.1-1.9 58.6-39.4 108.2-112.2 133-194.3 26.4-87.4 21.5-173.1-13.2-229.1v1.42109e-14z"/></svg>');
            mask-size: contain; -webkit-mask-size: contain; mask-repeat: no-repeat; -webkit-mask-repeat: no-repeat; mask-position: center; -webkit-mask-position: center;
            display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        #plaqueCanvas {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            mask-image: url('data:image/svg+xml;utf8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="m471,71.7c-20.2-32.6-49.1-53-83.6-58.9-27.9-4.8-57.2,0.1-87,14.6-27.8,13.5-61,13.5-88.9,0-29.8-14.4-59.1-19.3-87-14.6-34.4,5.9-63.3,26.2-83.5,58.9-34.7,56-39.6,141.7-13.2,229.1 24.8,82.1 74.5,154.8 133,194.3 10.5,7.1 23.9,7.8 35.1,1.9 10.8-5.7 17.5-16.8 17.5-29.1 0-107.9 30.2-166.2 42.6-166.2 12.4,0 42.6,58.2 42.6,166.4 0,12.1 6.6,23.2 17.5,28.9 15,7.7 28.3,2.7 35.1-1.9 58.6-39.4 108.2-112.2 133-194.3 26.4-87.4 21.5-173.1-13.2-229.1v1.42109e-14z"/></svg>');
            -webkit-mask-image: url('data:image/svg+xml;utf8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="m471,71.7c-20.2-32.6-49.1-53-83.6-58.9-27.9-4.8-57.2,0.1-87,14.6-27.8,13.5-61,13.5-88.9,0-29.8-14.4-59.1-19.3-87-14.6-34.4,5.9-63.3,26.2-83.5,58.9-34.7,56-39.6,141.7-13.2,229.1 24.8,82.1 74.5,154.8 133,194.3 10.5,7.1 23.9,7.8 35.1,1.9 10.8-5.7 17.5-16.8 17.5-29.1 0-107.9 30.2-166.2 42.6-166.2 12.4,0 42.6,58.2 42.6,166.4 0,12.1 6.6,23.2 17.5,28.9 15,7.7 28.3,2.7 35.1-1.9 58.6-39.4 108.2-112.2 133-194.3 26.4-87.4 21.5-173.1-13.2-229.1v1.42109e-14z"/></svg>');
            mask-size: contain; -webkit-mask-size: contain; mask-repeat: no-repeat; -webkit-mask-repeat: no-repeat; mask-position: center; -webkit-mask-position: center;
            touch-action: none;
        }
        .clean-msg { color: #d32f2f; font-size: 2rem; font-family: 'Playfair Display', serif; opacity: 0; transition: opacity 0.5s; position: absolute; pointer-events: none; }
        .progress-container { width: 300px; height: 10px; background: #eee; border-radius: 5px; overflow: hidden; margin-top: 10px; }
        .progress-bar { height: 100%; width: 0%; background: #4caf50; transition: width 0.1s; }

        /* --- INVITE MODAL --- */
        .invite-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(51, 51, 51, 0.95); z-index: 3000; flex-direction: column; justify-content: center; align-items: center;
        }
        .ticket { background: var(--kindle-screen-bg); color: var(--kindle-text); border: 1px solid #ccc; padding: 40px; max-width: 500px; border-radius: 5px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
        .calendar-btn { margin-top: 20px; background: var(--primary); color: white; text-decoration: none; display: inline-block; padding: 10px 20px; border-radius: 5px; font-weight: bold; }
    </style>
</head>
<body>

    <div id="debugConsole">System Check...</div>
    <div id="gazeDot"></div>

    <div class="calibration-overlay" id="calibrationOverlay">
        <h2 style="color:var(--primary);">Configuring Love Sensors...</h2>
        <p class="calib-instruction" id="calibText">Please LOOK AT the heart as you click it!</p>
        <button class="calib-btn" id="calibBtn" onclick="handleCalibrationClick()">‚ù§Ô∏è</button>
        <button class="skip-btn" id="skipBtn" onclick="endCalibration()">Skip Calibration (Camera Issues)</button>
    </div>

    <div class="kindle-section" id="kindleSection">
        <div class="kindle-device">
            <div class="kindle-screen" id="kindleScreen">
                <div class="book-layout">
                    <div class="book-spine-shadow"></div>
                    <div class="book-page left-page" id="pageLeft"></div>
                    <div class="book-page right-page" id="pageRight"></div>
                    <div class="click-hint">Tap sides or swipe to turn</div>
                </div> 
            </div> 
        </div> 
    </div>

    <div class="hero" id="heroSection">
        <h1 style="font-size: 3.5rem; margin-bottom: 10px;">So, Kali...</h1>
        <h2 style="font-size: 2rem; margin-bottom: 30px;">Will you be my Valentine?</h2>
        
        <div class="status-text" id="statusText"></div>

        <div class="btn-container">
            <button class="yes-btn" id="yesBtn" onclick="initGame()">YES! Absolutely!</button>
            <button class="no-btn" id="noBtn" onclick="moveNoButton()">No</button>
        </div>
    </div>

    <div class="game-modal" id="gameModal">
        <h2 style="color:var(--primary); margin-bottom: 10px; text-align:center; padding:0 20px;">Wait! This anterior molar needs a cleaning first!</h2>
        <p style="margin-bottom: 20px;">Use your finger/mouse to scrub away the plaque.</p>
        <div class="tooth-container">
            <div class="clean-tooth">
                <div class="clean-msg" id="cleanMsg">Sparkling! ‚ú®</div>
            </div>
            <canvas id="plaqueCanvas"></canvas>
        </div>
        <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>
        <p id="gameStatus" style="font-size: 0.9rem; margin-top:5px; color:#666;">Cleaning: 0%</p>
    </div>

    <div class="invite-modal" id="inviteModal">
        <div class="ticket">
            <h1 style="color: var(--primary)">It's a Date! ‚ù§Ô∏è</h1>
            <p>Excellent dental work, Dr. Hillary!</p>
            <hr style="border: 0; border-top: 1px solid #ccc; margin: 20px 0;">
            <h3>Valentine's Dinner</h3>
            <p><strong>When:</strong> Feb 14th, 2026 @ 7:00 PM</p>
            <p><strong>Where:</strong> A Surprise Location</p>
            <a href="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Valentine's+Dinner+with+Shavar&dates=20260214T190000/20260214T220000&details=Dinner+reservation+made+by+Shavar+for+Kali!&location=Surprise+Location" target="_blank" class="calendar-btn">Accept & Add to Calendar</a>
        </div>
    </div>

    <script>
        const debugConsole = document.getElementById('debugConsole');
        const gazeDot = document.getElementById('gazeDot');

        function log(msg) {
            debugConsole.innerText = msg;
            console.log(msg);
        }

        const bookContent = [
            {
                left: `<h2>Chapter 1: Us</h2><p class="letter-text">Dear Kali Hillary,<br><br>My love Kali, you are my greatest happiness. You being in my life brings so much joy, it feels like Christmas everyday I am with you.<br><br>We started talking when we were just children and from that day, January 8th, I knew you were the person I wanted to marry. I feel invincible with you in my life, I feel like I can accomplish all of my dreams with you by my side my love.<br><br>I remember the first time we bet on the benches outside the movies, I couldn't believe it was you, it felt so surreal because a few months earlier we had turnt strangers and I had told my self that nothing would stop me from getting you back.</p><div class="page-number">- 1 -</div>`,
                right: `<p class="letter-text">I know how much you love your kindle so I decided to build this like one because though I don't like to read, you do, and if I got amnesia or lost my brain, the few words I can guarantee I would know are I love Kali.<br><br>Your Lover,<br>Shavar</p><div class="photo-stack"><div class="kindle-photo" style="transform: rotate(2deg);"><img src="IMG_0931.jpg" alt="Us"></div><div class="kindle-photo" style="transform: rotate(2deg);"><img src="IMG_1846.jpg" alt="Us"></div></div><div class="page-number">- 2 -</div>`
            },
            {
                left: `<h2>Chapter 2: The Future</h2><p class="letter-text">Our book is still being written and this valentines day I hope that it will be a wonderful paragraph.<br><br>I always tell you that our future basket will go bad together because nothing in life will get me to stop loving you. I would drain the ocean so you have dry land to walk on, stop the wind to keep you warm, I feel jealous of the rain that falls on your skin because only I should feel so close to you.</p><div class="page-number">- 3 -</div>`,
                right: `<div class="photo-stack" style="transform: rotate(1deg);"><div class="kindle-photo"><img src="IMG_9118.PNG" alt="Future"></div><p class="letter-text" style="margin-top:20px; text-align:center;"><i>"You are my favorite person to debug life with."</i></p></div><div class="page-number">- 4 -</div>`
            }
        ];

        let currentPageIndex = 0;
        let isMobile = window.innerWidth <= 768;
        const kindleScreen = document.getElementById('kindleScreen');
        const pageLeft = document.getElementById('pageLeft');
        const pageRight = document.getElementById('pageRight');
        const statusText = document.getElementById('statusText');
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');

        // --- INIT & ERROR HANDLING ---
        let clicks = 0;
        const calibBtn = document.getElementById('calibBtn');
        
        window.onload = async function() {
            log("Initializing WebGazer...");
            
            // Show Skip button after 5 seconds if camera fails
            setTimeout(() => {
                document.getElementById('skipBtn').style.display = 'block';
            }, 5000);

            try {
                await webgazer.setRegression('ridge') 
                    .setGazeListener(function(data, clock) { 
                        if (data == null) {
                            log("WebGazer running, no eyes detected");
                            return;
                        }
                        // Update Blue Debug Dot
                        gazeDot.style.display = 'block';
                        gazeDot.style.left = data.x + 'px';
                        gazeDot.style.top = data.y + 'px';
                        
                        log(`Eyes at: ${Math.round(data.x)}, ${Math.round(data.y)}`);
                        
                        // If calibration is done, check gaze
                        if(document.getElementById('calibrationOverlay').style.display === 'none') {
                            checkGaze(data.x, data.y);
                        }
                    }).begin();
                
                webgazer.showVideo(false);
                webgazer.showFaceOverlay(false);
                webgazer.showPredictionPoints(false); // We use our blue dot instead
                log("WebGazer Started. Please Calibrate.");

            } catch (err) {
                log("Error: " + err.message);
                alert("Camera access denied or error. You can use the 'Skip' button.");
            }
        };

        function handleCalibrationClick() {
            clicks++;
            const maxX = window.innerWidth - 60;
            const maxY = window.innerHeight - 60;
            calibBtn.style.left = Math.random() * maxX + 'px';
            calibBtn.style.top = Math.random() * maxY + 'px';

            if (clicks >= 5) {
                endCalibration();
            } else {
                document.getElementById('calibText').innerText = `Great! ${5 - clicks} more clicks...`;
            }
        }

        function endCalibration() {
            document.getElementById('calibrationOverlay').style.display = 'none';
            document.getElementById('kindleSection').style.display = 'block';
            document.getElementById('heroSection').style.display = 'flex';
            renderPage(0);
            log("Calibration Done. App Active.");
        }

        function renderPage(index) {
            isMobile = window.innerWidth <= 768;
            let maxIndex = isMobile ? (bookContent.length * 2) - 1 : bookContent.length - 1;
            if(index < 0) index = 0; if(index > maxIndex) index = maxIndex;
            currentPageIndex = index;

            kindleScreen.classList.add('page-refreshing');
            setTimeout(() => {
                if (isMobile) {
                    const spreadIndex = Math.floor(index / 2);
                    const isRightSide = index % 2 === 1;
                    const contentObj = bookContent[spreadIndex];
                    if (isRightSide) {
                        pageLeft.style.display = 'none'; pageRight.style.display = 'block';
                        pageRight.innerHTML = contentObj.right;
                    } else {
                        pageLeft.style.display = 'block'; pageRight.style.display = 'none';
                        pageLeft.innerHTML = contentObj.left;
                    }
                } else {
                    pageLeft.style.display = 'block'; pageRight.style.display = 'block';
                    pageLeft.innerHTML = bookContent[index].left;
                    pageRight.innerHTML = bookContent[index].right;
                }
                kindleScreen.classList.remove('page-refreshing');
            }, 200);
        }
        window.addEventListener('resize', () => { renderPage(0); });

        // --- NAVIGATION ---
        kindleScreen.addEventListener('click', function(e) {
            const rect = kindleScreen.getBoundingClientRect();
            const width = rect.width;
            let maxIndex = isMobile ? (bookContent.length * 2) - 1 : bookContent.length - 1;
            if ((e.clientX - rect.left) > width / 2) {
                if (currentPageIndex < maxIndex) renderPage(currentPageIndex + 1);
            } else {
                if (currentPageIndex > 0) renderPage(currentPageIndex - 1);
            }
        });

        // --- DENTAL GAME ---
        let canvas, ctx, isDrawing = false;
        function initGame() {
            webgazer.pause();
            document.getElementById('gameModal').style.display = 'flex';
            canvas = document.getElementById('plaqueCanvas');
            ctx = canvas.getContext('2d', { willReadFrequently: true });
            canvas.width = canvas.offsetWidth; canvas.height = canvas.offsetHeight;
            ctx.fillStyle = "#f5e6a2"; ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "#e0c080";
            for(let i=0; i<20; i++) {
                ctx.beginPath(); ctx.arc(Math.random()*canvas.width, Math.random()*canvas.height, Math.random()*30+10, 0, Math.PI*2); ctx.fill();
            }
            ctx.globalCompositeOperation = 'destination-out';
            canvas.addEventListener('mousedown', startDraw); canvas.addEventListener('mousemove', draw); canvas.addEventListener('mouseup', endDraw);
            canvas.addEventListener('touchstart', startDraw); canvas.addEventListener('touchmove', draw); canvas.addEventListener('touchend', endDraw);
        }
        function startDraw(e) { isDrawing = true; draw(e); }
        function endDraw() { isDrawing = false; checkWinCondition(); }
        function draw(e) {
            if (!isDrawing) return; e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            let x, y;
            if(e.touches) { x = e.touches[0].clientX - rect.left; y = e.touches[0].clientY - rect.top; }
            else { x = e.clientX - rect.left; y = e.clientY - rect.top; }
            ctx.beginPath(); ctx.arc(x, y, 25, 0, Math.PI * 2); ctx.fill();
        }
        function checkWinCondition() {
            const data = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
            let transparentCount = 0, totalChecked = 0;
            for (let i = 0; i < data.length; i += 40) {
                if (data[i + 3] === 0) transparentCount++;
                totalChecked++;
            }
            const percentage = Math.floor((transparentCount / totalChecked) * 100);
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('gameStatus').innerText = `Cleaning: ${percentage}%`;
            if (percentage > 85) {
                canvas.style.pointerEvents = 'none';
                document.getElementById('cleanMsg').style.opacity = 1;
                document.getElementById('gameStatus').innerText = "CLEAN!";
                document.getElementById('gameStatus').style.color = "green";
                setTimeout(() => { document.getElementById('gameModal').style.display = 'none'; document.getElementById('inviteModal').style.display = 'flex'; }, 1500);
            }
        }

        // --- BUTTON MOVE LOGIC ---
        function checkGaze(x, y) {
            const yesRect = yesBtn.getBoundingClientRect();
            const noRect = noBtn.getBoundingClientRect();
            const buffer = 150; 
            
            // Check if gaze (x,y) is near NO button
            if (x >= noRect.left - buffer && x <= noRect.right + buffer &&
                y >= noRect.top - buffer && y <= noRect.bottom + buffer) {
                statusText.innerText = "Why are you thinking of no? ü§®";
                moveNoButton(); 
            } 
        }

        function moveNoButton() {
            const maxX = window.innerWidth - noBtn.offsetWidth - 20;
            const maxY = window.innerHeight - noBtn.offsetHeight - 20;
            noBtn.style.position = 'fixed'; 
            noBtn.style.left = Math.max(20, Math.random() * maxX) + 'px';
            noBtn.style.top = Math.max(20, Math.random() * maxY) + 'px';
            noBtn.style.zIndex = '100'; 
        }

        // Fallback: Move if mouse gets close (100px radius)
        document.addEventListener('mousemove', function(e) {
            const noRect = noBtn.getBoundingClientRect();
            const btnCenterX = noRect.left + noRect.width / 2;
            const btnCenterY = noRect.top + noRect.height / 2;
            const distance = Math.sqrt(Math.pow(e.clientX - btnCenterX, 2) + Math.pow(e.clientY - btnCenterY, 2));
            if (distance < 100) {
                statusText.innerText = "Why are you thinking of no? ü§®";
                moveNoButton();
            }
        });
    </script>
</body>
</html>
